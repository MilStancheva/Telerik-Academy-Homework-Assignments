#Composite Design Pattern#

##Мотивация
Ако си представим, например, програма за работа с файловата система  - файловата система е дървовидна структура, която се състои от клони (папки), както и листа - файлове. Всяка папка обикновено съдържа един или повече файлове, или други папки. По този начин се получава сложен обект, в който всеки файл е елементарен обект. Папките и файловете имат общи характеристики и изпълняват идентични фунцкии (преместване, копиране, листване на пропъртита като име и големина). С цел да ги използваме по-лесно можем да ги обединим под един общ интерфейс, например File System Resource Interface.



##Цел
 - Целта на Composite design pattern е да обединява обекти, които имат частична йерархична структура. 
 - Позволява индивидуални обекти, както и тяхното обединение да се използват идентично. 
 
##Имплементация 
 - Component (компонент)- компоментът е абстракция на листо от дървовидната структура, която Composite създава. Определя интерфейсът, който е необходимо да се имплементира от обектите в композицията. Например, всеки ресурс от файловата система определя операциите move, copy, rename, and getSize за файлов и за папки. 
 - Leaf (листо)- Листата са обекти, които нямат наследници(нямат деца). Те също имплементират методите и изпълняват опрацииите, които дефинира интерфейсът Component. Напримвер, всеки файл имплементира операциите move, copy, rename, as well as getSize, които са свързани с интерфейса Component.
 - Composite (композиция)- Композицията съхранява child компонентите, като в допълнение имплементира методите дефинирани от интерфейса Component. Композицията имплементира методите дефинирани от Component interface като ги делегира на своите съставни единици (children). Допълнително, композицията осигурява методи за добавяне, премахване и взимане на компоненти (adding, removing, getting).
 - Client - Клиентът работи с обектите в йерархията, като също имплементира Component interface.

##Приложение и примери 
Шаблонът Composite се прилага в случаите, когато имаме дървовидна йерархия (част от цяло) от обекти и клиентът трябва да използва обектите по еднакъв начин, независиомо от това дали са листа или клони (файлове или папки). 

Пример - Graphics Drawing Editor.

Графичните редактори се занимават с различни форми. Формите от своя страна могат да са базови и сложни. Пример за базова форма е линията, докато за сложна форма - правоъгълник, който е съставен от четири базови форми (линии). Тъй като формите извършват много общи операции (рендериране, ) и също така формите следват принципа на йерархична структура част от цяло, може да се приложи Composite design pattern. По този начин програмата ще може да комуникира с отделните обекти от структурата по еднакъв начин.

В примера могат да се разграничат следните участници: 
Shape/ форма (Component) - Формата е абстракцията на линия, правоъгълник (листа) и на сложни форми (composites/ композиции).
Line/линия, Rectangle/правоъгълник (Leafs/листа) - обекти, които нямат наследници (children). Имплементират Shape interface.
ComplexShape/ сложна форма (Composite/ композиция) - Композицията съхранява формите, които нямат деца и допълнително имплементират Shape interface.
GraphicsEditor (Client/ клиентът) - графичния редактор работи с формите в йерархията. 

##Специфики 

Composite design pattern определя йерархична структура от класове, които се състоят от прости и сложни обекти. Простите обекти могат да се обединят и да станат част от сложен обект, който от своя страна също може да се обедини с други сложни обекти в един обединяваш сложен обект. 
Клиентите се отнасят с простите и сложните обекти по един и същ начин. Те не правят разлика помежду им, чрез общия интерфейс Component. Благодарение на него, кодът на клиента става по-опростен.
Добавянето на нови компоменти е лесно.


#####Източници: 
 * http://www.oodesign.com/composite-pattern.html
 * https://msdn.microsoft.com/en-us/library/orm-9780596527730-01-05.aspx